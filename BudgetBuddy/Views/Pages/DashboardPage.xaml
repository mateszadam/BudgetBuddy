<UserControl x:Class="BudgetBuddy.Views.Pages.DashboardPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:BudgetBuddy.Views.Pages"
             xmlns:heplers="clr-namespace:BudgetBuddy.Views.Helpers"
             
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800" Loaded="UserControl_Loaded">
    <Grid Margin="0,10,0,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="4"
                    HorizontalAlignment="Center" VerticalAlignment="Center">

            <TextBlock Text="Periódus:" 
                       Style="{StaticResource ToolbarTextStyle}" 
                       Margin="0,0,6,0"/>

            <ComboBox x:Name="_periodCombo" Width="120" Margin="0,0,12,0"
                      Style="{StaticResource ModernComboBox}"
                      SelectionChanged="UpdateChart_Event">
                <ComboBoxItem Content="Hét"/>
                <ComboBoxItem Content="Hónap" IsSelected="True"/>
            </ComboBox>

            <TextBlock Text="Dátum:" 
                       Style="{StaticResource ToolbarTextStyle}" 
                       Margin="0,0,6,0"/>

            <Button x:Name="_prevBtn" Content="&lt;" Width="28" Margin="0,0,6,0"
                    ToolTip="Előző periódus"
                    Style="{StaticResource ToolbarButtonStyle}"
                    Click="PrevBtn_Click"/>

            <DatePicker x:Name="_datePicker" Width="160" Margin="0,0,6,0"
                        Style="{StaticResource ModernDatePicker}"
                        SelectedDateChanged="UpdateChart_Event"
                        Loaded="DatePicker_Loaded"/>

            <Button x:Name="_nextBtn" Content="&gt;" Width="28" Margin="0,0,12,0"
                    ToolTip="Következő periódus"
                    Style="{StaticResource ToolbarButtonStyle}"
                    Click="NextBtn_Click"/>

            <heplers:MultiSelectComboBox Placeholder="Select filtes..." 
                               ItemsSource="{Binding MyFilters}"
                               SelectionChanged="MultiSelectComboBox_SelectionChanged"/>
        </StackPanel>

        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="4"
                    HorizontalAlignment="Center" VerticalAlignment="Center">

            <TextBlock x:Name="_totalSpendText" 
                       Text="Összes költés: 0.00 ft"
                       Style="{StaticResource ToolbarTextStyle}" 
                       Margin="0,0,12,0"/>

            <Button x:Name="_showEachTransaction" 
                    Content="Részletek" Height="28" MinWidth="120"
                    ToolTip="Részletek mutatása a kiválasztott intervallumban."
                    Style="{StaticResource AccentButtonStyle}"
                    Click="OnShowEachTransactionClick"/>
        </StackPanel>

        <Border Grid.Row="2" Margin="12" BorderThickness="1" CornerRadius="6"
                Background="White"
                BorderBrush="{StaticResource ToolbarBorderBrush}">
            <Border Grid.Row="2" Margin="1" BorderThickness="1" CornerRadius="6"
        Background="White"
        BorderBrush="{StaticResource ToolbarBorderBrush}">

                <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                    <ItemsControl x:Name="ChartItemsControl" Margin="12,16,12,10">

                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>

                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid Width="60" Margin="5,0" VerticalAlignment="Bottom">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0"
                                   Text="{Binding AmountText}"
                                   FontWeight="SemiBold" FontSize="12"
                                   HorizontalAlignment="Center" Margin="0,0,0,4"/>

                                    <Rectangle Grid.Row="1"
                                   Fill="{Binding FillBrush}"
                                   Height="{Binding BarHeight}"
                                   VerticalAlignment="Bottom"
                                   RadiusX="4" RadiusY="4"
                                   MinHeight="1" />
                                   
                                   <TextBlock Grid.Row="2"
                                   Text="{Binding ShortCategory}"
                                   Foreground="DimGray" FontSize="12"
                                   Height="17"
                                   TextAlignment="Center" TextWrapping="Wrap"
                                   Margin="0,2,4,0"
                                   ToolTip="{Binding Category}"
                                               />
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Border>
        </Border>
    </Grid>
</UserControl>
